import{H as R,ae as H,L as j,ay as O,a as c,B as k,M as q,O as P,b as e,U as $,aA as K,G as _,T as Y,b3 as G,a3 as z,aM as J,e as W,aL as Q,N as X,o as D,c as x,w as s,a8 as C,aa as U,a7 as p,W as F,x as Z,a5 as ee,b0 as N,aH as A,v as T,q as M,a9 as te,y as E,aE as ae,aF as B,aG as le,t as oe,aC as se}from"./index.d2fcbbd6.js";import re from"./Tags.bc9f5fc9.js";import{b as L}from"./route-block.023af118.js";import{V as ne}from"./VForm.ac120bb6.js";const ie=R({name:"VCarousel",props:{color:String,cycle:Boolean,delimiterIcon:{type:H,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:l=>l>0},modelValue:null,progress:[Boolean,String],showArrows:{type:[Boolean,String],default:!0,validator:l=>typeof l=="boolean"||l==="hover"},verticalDelimiters:[Boolean,String]},emits:{"update:modelValue":l=>!0},setup(l,h){let{slots:a}=h;const u=j(l,"modelValue"),{t:I}=O(),V=c();let w=-1;k(u,y),k(()=>l.interval,y),k(()=>l.cycle,m=>{m?y():window.clearTimeout(w)}),q(d);function d(){!l.cycle||!V.value||(w=window.setTimeout(V.value.group.next,+l.interval>0?+l.interval:6e3))}function y(){window.clearTimeout(w),window.requestAnimationFrame(d)}return P(()=>e(J,{ref:V,modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,class:["v-carousel",{"v-carousel--hide-delimiter-background":l.hideDelimiterBackground,"v-carousel--vertical-delimiters":l.verticalDelimiters}],style:{height:z(l.height)},continuous:!0,mandatory:"force",showArrows:l.showArrows},{default:a.default,additional:m=>{let{group:i}=m;return e($,null,[!l.hideDelimiters&&e("div",{class:"v-carousel__controls",style:{left:l.verticalDelimiters==="left"&&l.verticalDelimiters?0:"auto",right:l.verticalDelimiters==="right"?0:"auto"}},[i.items.value.length>0&&e(K,{defaults:{VBtn:{color:l.color,icon:l.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[i.items.value.map((v,n)=>{const t={"aria-label":I("$vuetify.carousel.ariaLabel.delimiter",n+1,i.items.value.length),class:[i.isSelected(v.id)&&"v-btn--active"],onClick:()=>i.select(v.id,!0)};return a.item?a.item({props:t,item:v}):e(_,Y(v,t),null)})]})]),l.progress&&e(G,{class:"v-carousel__progress",color:typeof l.progress=="string"?l.progress:void 0,modelValue:(i.getItemIndex(u.value)+1)/i.items.value.length*100},null)])},prev:a.prev,next:a.next})),{}}}),ue=R({name:"VCarouselItem",inheritAttrs:!1,props:{value:null},setup(l,h){let{slots:a,attrs:u}=h;P(()=>e(Q,{class:"v-carousel-item",value:l.value},{default:()=>[e(W,u,a)]}))}}),de=E("span",{class:"d-none d-sm-block"},"Reset",-1),ce={__name:"create_post",setup(l){c([]);const h=c("Submit"),a=c({title:"",currency:"HKD",price:"",description:"",tags:[],images:[]});c("");const u=["USD","CNY","HKD","TWD"],I=()=>{a.value.images=[]};function V(n){const t=n.target.value.replace(/\D+/g,"");a.value.price=t.slice(0,5)}function w(n,t){const o=n.split(","),r=o[0].match(/:(.*?);/)[1],f=atob(o[1]);let g=f.length;const b=new Uint8Array(g);for(;g--;)b[g]=f.charCodeAt(g);return new File([b],t,{type:r})}const d=c(!1),y=async()=>{const n=new FormData;a.value.images.forEach((o,r)=>{n.append(`image${r}`,w(o,`image${r}.png`))});const t={...a.value};delete t.images,n.append("PostData",JSON.stringify(t));try{d.value=!0;const o=await se.post("/post/upload",{formData:n});if(o.status===200){const r=await o.data;console.log("Data submitted successfully:",r),alert("Submit Success!")}else d.value=!1,console.error("Error submitting data:",o.statusText)}catch(o){d.value=!1,console.error("Error submitting data:",o)}},m=n=>{const t=n.target.files||n.dataTransfer.files;if(!!t.length)for(let o=0;o<t.length;o++){if(a.value.images.length>=8){alert("You can only upload a maximum of 8 photos.");break}const r=new FileReader;r.onload=f=>{a.value.images.push(f.target.result)},r.readAsDataURL(t[o])}},i=c();c([]);const v=n=>{n.preventDefault();const t=n.dataTransfer.files;if(t.length>0){const o=Math.min(t.length,8);for(let r=0;r<o;r++){const f=t[r];if(f.type.startsWith("image/")){const g=new FileReader;g.onload=b=>{const S=new Image;S.src=b.target.result,console.log("Image dropped:",S),a.value.images.push(b.target.result)},g.readAsDataURL(f)}else console.warn("The dropped file is not an image")}}};return X(()=>{window.location.reload()}),(n,t)=>(D(),x(C,{class:"floating-window"},{default:s(()=>[e(C,null,{default:s(()=>[e(U,null,{default:s(()=>[e(p,{cols:"12"},{default:s(()=>[F(e(C,null,{default:s(()=>[e(ie,null,{default:s(()=>[(D(!0),Z($,null,ee(a.value.images,(o,r)=>(D(),x(ue,{key:r},{default:s(()=>[e(W,{src:o},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1},512),[[N,a.value.images&&a.value.images.length>0]]),a.value.images.length===0?(D(),x(_,{key:0,block:"",height:"500",class:"drag-and-drop-area",onDragover:t[0]||(t[0]=A(()=>{},["prevent"])),onClick:t[1]||(t[1]=o=>{var r;return(r=i.value)==null?void 0:r.click()}),onDrop:v},{default:s(()=>[e(T,{icon:"mdi-upload"}),M(" Upload/Drag and Drop "),e(T,{icon:"mdi-select-drag"})]),_:1})):te("",!0),E("input",{ref_key:"uploadIMG",ref:i,type:"file",name:"file",accept:".jpeg,.png,.jpg",hidden:"",multiple:"",onInput:m},null,544),F(e(_,{type:"reset",color:"error",variant:"tonal",onClick:I},{default:s(()=>[de,e(T,{icon:"mdi-refresh",class:"d-sm-none"})]),_:1},512),[[N,a.value.images&&a.value.images.length>0]])]),_:1})]),_:1})]),_:1}),e(ae,null,{default:s(()=>[e(ne,{onSubmit:t[6]||(t[6]=A(()=>{},["prevent"]))},{default:s(()=>[e(U,{justify:"center"},{default:s(()=>[e(p,{cols:"5"},{default:s(()=>[e(B,{modelValue:a.value.title,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.title=o),label:"Title",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(p,{cols:"4",md:"2"},{default:s(()=>[e(le,{modelValue:a.value.currency,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.currency=o),mandatory:"",items:u},null,8,["modelValue"])]),_:1}),e(p,{cols:"5"},{default:s(()=>[e(B,{modelValue:a.value.price,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.price=o),label:"Price",maxlength:"10",onInput:V},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:s(()=>[e(B,{modelValue:a.value.description,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.description=o),label:"Description"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:s(()=>[e(re)]),_:1}),e(_,{width:"200",height:"50",block:d.value,loading:d.value,onClick:y},{loader:s(()=>[e(G,{indeterminate:""})]),default:s(()=>[M(" "+oe(h.value),1)]),_:1},8,["block","loading"])]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof L=="function"&&L(ce);export{ce as default};
