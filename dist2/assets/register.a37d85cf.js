import{o as S,x as $,b8 as B,aB as M,a as g,F as N,E as H,N as j,r as D,b as s,w as r,aW as z,y as d,z as p,aX as O,q as y,aE as k,aH as K,aa as W,a7 as u,aF as _,be as C,G,u as V,a8 as Q,e as w,aC as X}from"./index.d2fcbbd6.js";import{a as Z,b as J,l as Y,_ as ee,g as te,s as ae}from"./suprised.63b7e474.js";import{b as E}from"./route-block.023af118.js";import{V as se}from"./VForm.ac120bb6.js";import{V as ne}from"./VCheckbox.176b8183.js";const I="hcaptcha-api-script-id",P="_hcaptchaOnLoad";let x,R;const v=new Promise((a,t)=>{x=a,R=t});function re(a){if(window.hcaptcha)return x(),v;if(document.getElementById(I))return v;window[P]=x;const t=oe(a),n=document.createElement("script");return n.id=I,n.src=t,n.async=!0,n.defer=!0,n.onerror=c=>{console.error("Failed to load api: "+t,c),R("Failed to load api.js")},document.head.appendChild(n),v}function oe(a){let t=a.apiEndpoint;return t=l(t,"render","explicit"),t=l(t,"onload",P),t=l(t,"recaptchacompat",a.reCaptchaCompat===!1?"off":null),t=l(t,"hl",a.language),t=l(t,"sentry",a.sentry),t=l(t,"endpoint",a.endpoint),t=l(t,"assethost",a.assethost),t=l(t,"imghost",a.imghost),t=l(t,"reportapi",a.reportapi),t}function l(a,t,n){if(n!=null){const c=a.includes("?")?"&":"?";return a+c+t+"="+encodeURIComponent(n)}return a}var ie=(a,t)=>{for(const[n,c]of t)a[n]=c;return a};const le={name:"VueHcaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String,default:void 0},size:{type:String,default:void 0},tabindex:{type:String,default:void 0},language:{type:String,default:void 0},reCaptchaCompat:{type:Boolean,default:!0},challengeContainer:{type:String,default:void 0},rqdata:{type:String,default:void 0},sentry:{type:Boolean,default:!0},apiEndpoint:{type:String,default:"https://hcaptcha.com/1/api.js"},endpoint:{type:String,default:void 0},reportapi:{type:String,default:void 0},assethost:{type:String,default:void 0},imghost:{type:String,default:void 0}},data:()=>({widgetId:null,hcaptcha:null,renderedCb:null}),mounted(){return re(this.$props).then(this.onApiLoaded).catch(this.onError)},unmounted(){this.teardown()},destroyed(){this.teardown()},methods:{teardown(){this.widgetId&&(this.hcaptcha.reset(this.widgetId),this.hcaptcha.remove(this.widgetId))},onApiLoaded(){this.hcaptcha=window.hcaptcha;const a={sitekey:this.sitekey,theme:this.theme,size:this.size,tabindex:this.tabindex,callback:this.onVerify,"expired-callback":this.onExpired,"chalexpired-callback":this.onChallengeExpired,"error-callback":this.onError,"open-callback":this.onOpen,"close-callback":this.onClose};this.challengeContainer&&(a["challenge-container"]=this.challengeContainer),this.widgetId=this.hcaptcha.render(this.$el,a),this.rqdata&&this.hcaptcha.setData(this.widgetId,{rqdata:this.rqdata}),this.onRendered()},execute(){this.widgetId?(this.hcaptcha.execute(this.widgetId),this.onExecuted()):this.renderedCb=()=>{this.renderedCb=null,this.execute()}},executeAsync(){if(this.widgetId)return this.onExecuted(),this.hcaptcha.execute(this.widgetId,{async:!0});let a;const t=new Promise(n=>{a=n});return this.renderedCb=()=>{this.renderedCb=null,a()},t.then(this.executeAsync)},reset(){this.widgetId?(this.hcaptcha.reset(this.widgetId),this.onReset()):this.$emit("error","Element is not rendered yet and thus cannot reset it. Wait for `rendered` event to safely call reset.")},onRendered(){this.$emit("rendered"),this.renderedCb&&this.renderedCb()},onExecuted(){this.$emit("executed")},onReset(){this.$emit("reset")},onError(a){this.$emit("error",a),this.reset()},onVerify(){const a=this.hcaptcha.getResponse(this.widgetId),t=this.hcaptcha.getRespKey(this.widgetId);this.$emit("verify",a,t)},onExpired(){this.$emit("expired")},onChallengeExpired(){this.$emit("challengeExpired")},onOpen(){this.$emit("opened")},onClose(){this.$emit("closed")}}},de={id:"hcap-script"};function ce(a,t,n,c,f,b){return S(),$("div",de)}var he=ie(le,[["render",ce]]);const ue={class:"auth-wrapper d-flex align-center justify-center pa-4"},pe={class:"d-flex"},me=["innerHTML"],fe=d("h5",{class:"text-h5 font-weight-semibold mb-1"}," Earning starts here \u{1F680} ",-1),ge=d("p",{class:"mb-0"}," Make your app management easy and fun! ",-1),ye={class:"d-flex align-center mt-1 mb-4"},_e=d("span",{class:"me-1"},"I agree to",-1),we=d("a",{href:"javascript:void(0)",class:"text-primary"},"privacy policy & terms",-1),ve=d("span",null,"Already have an account?",-1),xe=d("span",{class:"mx-4"},"or",-1),be={__name:"register",setup(a){const t=B(),n=M(),c=async()=>{try{const e=await X.post("/register",i.value);if(e.status===200){console.log(e.data);const o=e.data.session_token;localStorage.setItem("session_token",o),alert(e.data.message),n.commit("setLoggedIn",!0),n.commit("setUser",e.data.username),await t.push("/")}else throw alert(e.data.message),new Error("Network response was not ok")}catch(e){console.error("There was a problem with the fetch operation:",e)}},f=g(null),b=e=>{f.value=e},i=g({username:"",email:"",password:"",privacyPolicies:!1,hcaptcharesponse:f}),T=[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid",e=>e&&e.length<=255||"E-mail must be less than 255 characters"],A=[e=>!!e||"Username cannot be blank",e=>e&&e.length<=20||"Username must be less than 20 characters"],F=[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters",e=>/[A-Z]/.test(e)||"Password must contain at least one uppercase letter",e=>/[a-z]/.test(e)||"Password must contain at least one lowercase letter",e=>/\d/.test(e)||"Password must contain at least one digit",e=>e&&e.length<=255||"Password must be less than 255 characters"],L=N(),U=H(()=>L.global.name.value==="light"?Z:J),m=g(!1);return j(()=>{window.location.reload()}),(e,o)=>{const q=D("RouterLink");return S(),$("div",ue,[s(Q,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:r(()=>[s(z,{class:"justify-center"},{prepend:r(()=>[d("div",pe,[d("div",{innerHTML:p(Y)},null,8,me)])]),default:r(()=>[s(O,{class:"font-weight-semibold text-2xl text-uppercase"},{default:r(()=>[y(" Owenisas ")]),_:1})]),_:1}),s(k,{class:"pt-2"},{default:r(()=>[fe,ge]),_:1}),s(k,null,{default:r(()=>[s(se,{onSubmit:o[5]||(o[5]=K(()=>{},["prevent"]))},{default:r(()=>[s(W,null,{default:r(()=>[s(u,{cols:"12"},{default:r(()=>[s(_,{modelValue:i.value.username,"onUpdate:modelValue":o[0]||(o[0]=h=>i.value.username=h),rules:A,required:"",maxlength:20,label:"Username"},null,8,["modelValue"])]),_:1}),s(u,{cols:"12"},{default:r(()=>[s(_,{modelValue:i.value.email,"onUpdate:modelValue":o[1]||(o[1]=h=>i.value.email=h),required:"",rules:T,label:"Email",maxlength:255,type:"email"},null,8,["modelValue"])]),_:1}),s(u,{cols:"12"},{default:r(()=>[s(_,{modelValue:i.value.password,"onUpdate:modelValue":o[2]||(o[2]=h=>i.value.password=h),label:"Password",rules:F,required:"",maxlength:255,type:m.value?"text":"password","append-inner-icon":m.value?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":o[3]||(o[3]=h=>m.value=!m.value)},null,8,["modelValue","type","append-inner-icon"]),d("div",ye,[s(ne,{id:"privacy-policy",modelValue:i.value.privacyPolicies,"onUpdate:modelValue":o[4]||(o[4]=h=>i.value.privacyPolicies=h),inline:""},null,8,["modelValue"]),s(C,{for:"privacy-policy",style:{opacity:"1"}},{default:r(()=>[_e,we]),_:1})]),s(C,null,{default:r(()=>[s(p(he),{ref:"hCaptcha",sitekey:"d81c1918-e893-42aa-9979-202cac1697aa",onVerify:b},null,512)]),_:1}),s(G,{block:"",type:"submit",onClick:c},{default:r(()=>[y(" Sign up ")]),_:1})]),_:1}),s(u,{cols:"12",class:"text-center text-base"},{default:r(()=>[ve,s(q,{class:"text-primary ms-2",to:"login"},{default:r(()=>[y(" Sign in instead ")]),_:1})]),_:1}),s(u,{cols:"12",class:"d-flex align-center"},{default:r(()=>[s(V),xe,s(V)]),_:1}),s(u,{cols:"12",class:"text-center"},{default:r(()=>[s(ee)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(w,{class:"auth-footer-start-tree d-none d-md-block",src:p(te),width:380},null,8,["src"]),s(w,{src:p(ae),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),s(w,{class:"auth-footer-mask d-none d-md-block",src:p(U)},null,8,["src"])])}}};typeof E=="function"&&E(be);export{be as default};
