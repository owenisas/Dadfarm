import{$ as T,aU as L,a as c,aV as I,L as _,aW as M,r as U,o as B,ae as F,e,w as a,aE as R,a7 as l,aD as m,aX as j,aF as N,s as g,a6 as h,a8 as P,ac as D,a9 as E,a4 as n,aa as V,_ as S,v as b,a5 as $,f as v,ao as w,a1 as H}from"./index.90141216.js";import{a as W,b as O,_ as X,g as q,s as z}from"./suprised.e81e7efc.js";import{V as A}from"./VCheckbox.7339e82e.js";const G={class:"auth-wrapper d-flex align-center justify-center pa-4"},J={class:"d-flex"},K=["innerHTML"],Q=l("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to Marketplace! \u{1F44B}\u{1F3FB} ",-1),Y=l("p",{class:"mb-0"}," Please sign-in to your account and start the your online store! ",-1),Z={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},ee=l("a",{class:"ms-2 mb-1",href:"javascript:void(0)"}," Forgot Password? ",-1),se=l("span",null,"New on our platform?",-1),ae=l("span",{class:"mx-4"},"or",-1),te={__name:"login",setup(oe){const u=T(),x=L(),p=c(!1),d=c(""),r=c({email:"",password:"",remember:!1}),k=async()=>{try{const s=await H.post("/login",r.value);if(s.status===200){console.log(s.data);const t=s.data.session_token;localStorage.setItem("session_token",t),u.commit("setLoggedIn",!0),u.commit("setUser",s.data.username);const f=_(()=>!!u.state.isLoggedIn),o=_(()=>u.state.user);console.log(f.value),console.log(o.value),await x.push("/"),alert(s.data.message)}else s.status===401&&(console.log(s,s.data),p.value=!0,d.value=s.data.message)}catch(s){s.response&&s.response.status===401?(console.log(s.response.data),s.value=!0,d.value=s.response.data.message):console.error("There was a problem with the fetch operation:",s)}},y=I(),C=_(()=>y.global.name.value==="light"?W:O),i=c(!1);return M(()=>{window.location.reload()}),(s,t)=>{const f=U("RouterLink");return B(),F("div",G,[e($,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:a(()=>[e(R,{class:"justify-center"},{prepend:a(()=>[l("div",J,[l("div",{innerHTML:m(j)},null,8,K)])]),default:a(()=>[e(N,{class:"font-weight-semibold text-2xl text-uppercase"},{default:a(()=>[g(" Owenisas ")]),_:1})]),_:1}),e(h,{class:"pt-2"},{default:a(()=>[Q,Y]),_:1}),e(h,null,{default:a(()=>[e(P,{onSubmit:t[4]||(t[4]=D(()=>{},["prevent"]))},{default:a(()=>[e(E,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(V,{modelValue:r.value.email,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value.email=o),label:"Email",type:"email",error:p.value,"error-messages":d.value},null,8,["modelValue","error","error-messages"])]),_:1}),e(n,{cols:"12"},{default:a(()=>[e(V,{modelValue:r.value.password,"onUpdate:modelValue":t[1]||(t[1]=o=>r.value.password=o),label:"Password",error:p.value,"error-messages":d.value,type:i.value?"text":"password","append-inner-icon":i.value?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":t[2]||(t[2]=o=>i.value=!i.value)},null,8,["modelValue","error","error-messages","type","append-inner-icon"]),l("div",Z,[e(A,{modelValue:r.value.remember,"onUpdate:modelValue":t[3]||(t[3]=o=>r.value.remember=o),label:"Remember me"},null,8,["modelValue"]),ee]),e(S,{block:"",type:"submit",onClick:k},{default:a(()=>[g(" Login ")]),_:1})]),_:1}),e(n,{cols:"12",class:"text-center text-base"},{default:a(()=>[se,e(f,{class:"text-primary ms-2",to:{name:"register"}},{default:a(()=>[g(" Create an account ")]),_:1})]),_:1}),e(n,{cols:"12",class:"d-flex align-center"},{default:a(()=>[e(b),ae,e(b)]),_:1}),e(n,{cols:"12",class:"text-center"},{default:a(()=>[e(X)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{class:"auth-footer-start-tree d-none d-md-block",src:m(q),width:380},null,8,["src"]),e(v,{src:m(z),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),e(v,{class:"auth-footer-mask d-none d-md-block",src:m(C)},null,8,["src"])])}}};typeof w=="function"&&w(te);export{te as default};
